# ====================================
# LYREBIRD TEST ENVIRONMENT CONFIGURATION
# ====================================
# Copy this file to .env.test for running tests
# This file is safe to commit - no secrets here

# ----------------
# Test Service Ports
# ----------------
# Using 4xxx ports to avoid conflicts with development (3xxx)
GATEWAY_PORT=4000
INGESTION_PORT=4001
ANALYSIS_PORT=4002

# ----------------
# Test Database Configuration
# ----------------
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=lyrebird_test

# ----------------
# Test RabbitMQ Configuration
# ----------------
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_VHOST=/

# ----------------
# Test Redis Configuration
# ----------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_test

# ----------------
# Application
# ----------------
NODE_ENV=test

# ----------------
# Health Check Configuration
# ----------------
# Memory limits for health checks (in MB)
HEALTH_HEAP_LIMIT_MB=150
HEALTH_RSS_LIMIT_MB=150

# ----------------
# API Version
# ----------------
API_VERSION=v1

# ----------------
# Bluesky API Configuration (for integration tests)
# ----------------
# Your test Bluesky handle (e.g., testaccount.bsky.social)
BLUESKY_IDENTIFIER=test-account.bsky.social
# Test App Password - generate a separate one for testing
BLUESKY_APP_PASSWORD=test-xxxx-xxxx-xxxx

# ----------------
# Jetstream Configuration (Real-time streaming)
# ----------------
# Maximum duration for streaming jobs (in ms) - short for tests
JETSTREAM_MAX_DURATION_MS=30000
# Enable zstd compression (requires decompression implementation, disabled by default)
JETSTREAM_COMPRESS=false

# ----------------
# Machine Learning (Local ONNX Inference)
# ----------------
# Directory to cache downloaded ML models (uses separate dir for tests)
ML_MODEL_CACHE_DIR=./.models-cache-test
# Model quantization level: q8 (recommended), fp32, fp16 (default: q8)
ML_QUANTIZATION=q8
